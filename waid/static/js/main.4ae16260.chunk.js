(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(6),o=n.n(r),s=(n(94),n(66),n(44)),c=n.n(s),l=n(9),u=n(10),d=n(18),h=n(17),m=n(19),v=(n(136),n(62)),f=n.n(v),p=(n(145),n(146),n(84)),y=n.n(p),b=(n(151),n(85)),w=n.n(b),k=(n(60),n(31)),g=n.n(k),E=(n(162),function(){function e(t,n){Object(l.a)(this,e);var a="object"===typeof t?t:{title:t,timeList:n};this.title=a.title||"",this.startTime=a.startTime||0,this.relativeStr=a.relativeStr||"",this.timeList=a.timeList||[],this.checkTimeList(),this.createAt=a.createAt||(this.timeList[0]||{}).start||Date.now()}return Object(u.a)(e,[{key:"checkTimeList",value:function(){this.timeList=this.timeList.filter(function(e){return"undefined"!==e.start&&"undefined"!==typeof e.end})}},{key:"start",value:function(){this.startTime||(this.startTime=Date.now(),this.timeList.push({start:this.startTime,end:0}))}},{key:"stop",value:function(){this.startTime=0;try{this.timeList[this.timeList.length-1].end=Date.now()}catch(e){}}},{key:"updateRelativeStr",value:function(e,t){e=e||this.startTime||Date.now();var n=(t=t||Date.now())-e,a="";if(n>=864e5){var i=parseInt(n/864e5);n-=864e5*i,a+=i+"\u5929"}if(n>=36e5){var r=parseInt(n/36e5);n-=36e5*r,a+=r+"\u5c0f\u65f6"}if(n>=6e4){var o=parseInt(n/6e4);n-=6e4*o,a+=o+"\u5206"}if(n>=1e3){var s=parseInt(n/1e3);n-=1e3*s,a+=s+"\u79d2"}a||(a="0\u79d2"),this.timeList[this.timeList.length-1].end=t,this.relativeStr=a}}]),e}()),L=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handlerClick",value:function(){var e=Date.now();e-this.time>100&&e-this.time<300?(this.time=0,this.props.onDoubleTap()):this.time=e}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"c-action",onClick:function(){e.handlerClick()}},this.props.children)}}]),t}(i.a.Component),j=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"get",value:function(e){var t=localStorage.getItem(e);try{t=JSON.parse(t)}catch(n){}return t}},{key:"set",value:function(e,t){try{t=JSON.stringify(t)}catch(n){}localStorage.setItem(e,t)}}]),e}(),O=g.a.Item,S={vivible:!1,value:""},C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).localKey="waid-index-record-list",n.state={recordList:n.loadeRecordList(),modal:S},n.timerID=null,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.start()}},{key:"componentDidUpdate",value:function(e,t){this.storeRecordList()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"start",value:function(e){var t=this,n=this.state.recordList,a=n[e]||new E;a.startTime?a.stop():a.start(),e>=0&&e<n.length&&a.startTime&&(n.splice(e,1),n.unshift(a));for(var i=[],r=n.length-1;r>=0;r--){var o=n[r];o.startTime&&(n.splice(r,1),i.push(o))}i.forEach(function(e){n.unshift(e)});var s=!1;n.forEach(function(e){s=s||e.startTime}),s?this.timerID||(this.timerID=setInterval(function(){n.forEach(function(e){e.startTime&&e.updateRelativeStr()}),t.setState({recordList:n})},1e3)):(this.setState({recordList:n}),this.stop())}},{key:"stop",value:function(){clearInterval(this.timerID),this.timerID=null,this.storeRecordList()}},{key:"addItem",value:function(){if(!S.value)return alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6807\u9898"),!1;var e=this.state.recordList;return e.push(new E(S.value)),this.setState({recordList:e}),!0}},{key:"switchModal",value:function(){S.vivible=!S.vivible,S.value=S.vivible?"":S.value,this.setState({modal:S})}},{key:"handleInputChange",value:function(e){S.value=e,this.setState({modal:S})}},{key:"loadeRecordList",value:function(){var e=j.get(this.localKey)||[],t=[];return e.forEach(function(e){t.push(new E(e))}),t}},{key:"storeRecordList",value:function(){j.set(this.localKey,this.state.recordList)}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{className:"index"},i.a.createElement(g.a,{renderHeader:function(){return i.a.createElement("div",{className:"index-list-header"},"\u6211\u5728\u505a\u4e9b\u4ec0\u4e48\uff1f!")},className:"index-list"},this.state.recordList.map(function(t,n){return i.a.createElement(L,{onDoubleTap:function(){return e.start(n)},key:n},i.a.createElement(O,{extra:t.relativeStr,className:t.startTime&&"index-list-item-active",onClick:function(){}},i.a.createElement("span",{className:"index-list-item-title"},t.title)))})),i.a.createElement("div",{className:"index-add float-btn",onClick:function(){return e.switchModal()}},i.a.createElement(c.a,{type:"cross",size:"lg",color:"#666"})),i.a.createElement(y.a,{visible:this.state.modal.vivible,transparent:!0,maskClosable:!0,title:"\u8f93\u5165\u4e8b\u9879\u540d\u79f0",footer:[{text:"\u786e\u8ba4",onPress:function(){e.addItem()&&e.switchModal()}}],onClose:function(){e.switchModal()}},i.a.createElement("div",{className:"index-modal-input-box btn"},i.a.createElement(w.a,{clear:!0,maxLength:"30",onChange:function(t){return e.handleInputChange(t)}}))))}}]),t}(i.a.Component),I=(n(163),n(45)),T=n.n(I),x=g.a.Item,N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).localKey="waid-index-record-list",n.state={recordList:n.loadeRecordList()},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"loadeRecordList",value:function(){var e=j.get(this.localKey)||[],t={};e.forEach(function(e){var n=new E(e);n.timeList.forEach(function(e){var a=T()(e.start).format("YYYY-MM-DD");t[a]=t[a]||[];var i=new E(n);i.timeList=[e],i.startTime=e.start,i.updateRelativeStr(e.start,e.end),t[a].push(i)})});var n=[];for(var a in t)t[a].sort(function(e,t){return e.startTime-t.startTime}),n.push({date:a,records:t[a]});return n.sort(function(e,t){return T()(e.date).isAfter(T()(t.date))?-1:1}),n}},{key:"render",value:function(){return i.a.createElement("section",{className:"daily"},this.state.recordList.map(function(e,t){return i.a.createElement("div",{className:"dailiy-list-box",key:t},i.a.createElement("div",{className:"daily-list-header",style:{zIndex:t+99}},e.date),i.a.createElement(g.a,{className:"daily-list"},e.records.map(function(e,t){return i.a.createElement(x,{extra:e.relativeStr,key:t},e.title)})))}))}}]),t}(i.a.Component),D=n(86),R=n(23),W=f.a.Item,A={vivible:!1,value:""},M=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={popover:A},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handlePopoverVisibleChange",value:function(e){A.vivible=e,this.setState({popover:A})}},{key:"onPopoverSelect",value:function(e){window.location.href="#"+e.props.value,this.handlePopoverVisibleChange(!1)}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{className:"app"},i.a.createElement(D.a,null,i.a.createElement(R.a,{path:"/",exact:!0,component:C}),i.a.createElement(R.a,{path:"/daily",exact:!0,component:N}),i.a.createElement(f.a,{mask:!0,overlayClassName:"app-menu",visible:this.state.popover.vivible,overlay:[i.a.createElement(W,{value:"/"},i.a.createElement("div",{className:"app-menu-item"},"\u6211\u5728\u505a\u4e9b\u4ec0\u4e48\uff1f\uff01")),i.a.createElement(W,{value:"/daily"},i.a.createElement("div",{className:"app-menu-item"},"\u65e5\u5e38"))],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},placement:"left",onVisibleChange:function(t){return e.handlePopoverVisibleChange(t)},onSelect:function(t){return e.onPopoverSelect(t)}},i.a.createElement("div",{className:"index-more float-btn"},i.a.createElement(c.a,{type:"ellipsis",size:"lg",color:"#666"})))))}}]),t}(i.a.Component),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(M,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/waid",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/waid","/service-worker.js");P?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):U(t,e)})}}()},89:function(e,t,n){e.exports=n(171)},94:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.4ae16260.chunk.js.map